!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i=(()=>{let t=[],e=[];const n=t=>{for(let n=0;n<e.length;n+=1)if(e[n].getID()===t)return e[n]};return{getPlayerPositions:()=>t,addPlayerPositions:e=>{console.log("positions: "+e),e.forEach(e=>{t.push(e)})},addPlayerPosition:e=>t.push(e),addPlayerShip:t=>{e.push(t)},getShip:n,addShipPositions:(t,n)=>{for(let i=0;i<e.length;i+=1)if(e[i].getID()===t)return n.forEach(t=>{e[i].addPosition(t)}),e[i].getPositions()},isValidPosition:(e,i)=>{const r=n(i).getPositions();for(let n=0;n<e.length;n+=1)if(t.includes(e[n])&&!r.includes(e[n]))return!0;return!1},removeAllShipsPositions:()=>{e.forEach(t=>{t.resetPositions()}),t=[],e=[]},removePlayerPositions:e=>{e.forEach(e=>{const n=t.indexOf(e);t.splice(n,1)})},removeShipPositions:(t,n)=>{for(let i=0;i<e.length;i+=1)if(e[i].getID()===t){e[i].removePositions(n);break}},resetShipPositions:t=>{for(let n=0;n<e.length;n+=1)if(e[n].getID()===t)return e[n].resetPositions()},hasPlayerPosition:e=>t.includes(e),removeLastPlayerPosition:()=>{t.pop()},hasPlayerPositions:e=>{for(let n=0;n<e.length;n+=1)if(t.includes(e[n]))return!0;return!1}}})(),r=(()=>{let t="";const e=e=>{e.target.classList.add("drag-start"),e.dataTransfer.setData("text",e.target.id),(e=>{t=e})(e.target.id),setTimeout(()=>e.target.classList.add("invisible"),0)},n=t=>{t.target.classList.remove("invisible"),t.target.classList.remove("drag-start")},r=t=>{const e=i.getShip(t.target.id),n=parseInt(e.getPositions()[0].match(/\d+/)[0]),r=e.getPositions()[0].match(/[a-j]/)[0],o=[...e.getPositions()].splice(1),a=t.target.className.match(/horizontal|vertical/)[0],l="abcdefghij".split("");let d=[];if(e.getPositions().length>1){for(let t=1;t<e.getPositions().length;t+=1)"vertical"===a?d.push(`${n}-${l[l.indexOf(r)+t]}`):"horizontal"===a&&d.push(`${n+t}-${r}`);e.overridePositions(d)}i.hasPlayerPositions(d)||(i.removePlayerPositions(o),i.addPlayerPositions(d),s(t))},o=(t,e,n)=>{t.classList.remove(e);let i="";e.includes("vertical")?i="horizontal":e.includes("horizontal")&&(i="vertical"),t.classList.add(`${i}${e.substring(n)}`)},s=t=>{t.target.classList.forEach(e=>{/^horizontal/.test(e)?o(t.target,e,10):/^vertical/.test(e)&&o(t.target,e,8)})};return{init:()=>{const t=document.querySelectorAll('*[class^="ship"]');for(const i of t)i.addEventListener("dragstart",e,!1),i.addEventListener("dragend",n,!1),i.addEventListener("click",r,!1)},getDragged:()=>t}})();const o=t=>{t.preventDefault()},s=t=>{t.preventDefault()},a=t=>{t.preventDefault()},l=t=>t.match(/battleship/)?4:t.match(/cruiser/)?3:t.match(/destroyer/)?2:t.match(/submarine/)?1:void 0,d=(t,e,n)=>{const i=parseInt(t.match(/\d+/)[0]),r=t.substring(5).match(/[a-j]/)[0],o=e.match(/horizontal|vertical/)[0],s="abcdefghij".split("");let a=[];if(n>1)for(let t=1;t<n;t+=1)"horizontal"===o?a.push(`${i}-${s[s.indexOf(r)+t]}`):"vertical"===o&&a.push(`${i+t}-${r}`);return a},c=t=>{const e=t.dataTransfer.getData("text"),n=document.getElementById(e),r=i.resetShipPositions(e);r&&i.removePlayerPositions(r),t.target.appendChild(n),((t,e,n)=>{const r=t.id.substring(5),o=l(n),s=[r,...d(t.id,e.className,o)],a=i.addShipPositions(n,s);a&&i.addPlayerPositions(a)})(t.target,n,e),n.className=(t=>{const e=t.split(" ");return e.splice(1,0,"dropped"),e.join(" ")})(n.className)},u=t=>{t.preventDefault(),(t=>{const e=r.getDragged(),n=document.getElementById(e),o=d(t.target.id,n.className,l(e)),s=[t.target.id.substring(5),...o];for(let t=0;t<s.length;t+=1)if(s[t].match(/undefined/))return!0;return i.isValidPosition(s,e)})(t)||/^cell/.test(t.target.id)&&c(t)};var h=(t,e,n)=>{let i=[],r=[];return{getID:()=>t,getType:()=>e,getSize:()=>n,getPositions:()=>i,addPosition:t=>{i.push(t),console.log("in ship add position"),console.log(i)},overridePositions:t=>{const e=i[0];i=[e,...t]},resetPositions:()=>{console.log(i);const t=[...i];return i=[],t},hit:t=>{r.push(t)},isSunk:()=>i.length===r.length}};var g=[{size:4,quantity:1,name:"battleship"},{size:3,quantity:2,name:"cruiser"},{size:2,quantity:3,name:"destroyer"},{size:1,quantity:4,name:"submarine"}];var f=()=>{(()=>{const t=document.getElementById("ships");let e="";g.forEach(t=>{const n=t.quantity;for(let r=0;r<n;r+=1){const n=h(`${t.name}-${r}`,t.name,t.size);i.addPlayerShip(n),e+=`<div id="${t.name}-${r}" class="ship-${t.name}-${r} horizontal-${t.name}" draggable="true"></div>`}}),t.innerHTML=e})(),r.init(),(()=>{const t=document.querySelectorAll(".cell");for(const e of t)e.addEventListener("dragover",o,!1),e.addEventListener("dragenter",s,!1),e.addEventListener("dragleave",a,!1),e.addEventListener("drop",u,!1)})()};const p=(t,e,n)=>t>=0&&t<n-1&&0===e?"first-border":t===n-1&&0===e?"bottom-right-border":t===n-1&&e>0?"last-row-inner-border":"inner-border";var m=()=>{(()=>{const t=document.getElementById("board");t.innerHTML="";const e=["a","b","c","d","e","f","g","h","i","j"];for(let n=0;n<10;n+=1){let i=`<div id="cells-${n+1}" class="cells">`;for(let t=0;t<10;t+=1)i+=`<div id="cell-${n+1}-${e[t]}" class="cell ${p(n,t,10)}"></div>`;i+="</div>",t.innerHTML+=i}})()};const P="abcdefghij".split("");let v=[];const y=t=>{for(let e=0;e<t.length;e+=1){const n=t[e].split("-");if(t[e].includes("undefined"))return!1;if(n[0]>10||n[1]>"j")return!1;for(let n=0;n<v.length;n+=1)if(v[n][1].includes(t[e]))return!1}return!0},b=(t,e,n)=>{v.push([t,[...e],n])},$=(t,e,n)=>{let i=[t];const r=t.split("-"),o=parseInt(r[0]),s=r[1];if("horizontal"===n)for(let t=0;t<e;t+=1)i.push(`${o}-${P[P.indexOf(s)+t+1]}`);else for(let t=0;t<e;t+=1)i.push(`${o+t+1}-${s}`);return i},E=()=>`${Math.floor(10*Math.random())+1}-${P[Math.floor(10*Math.random())]}`;var S,z=()=>{m(),f(),i.removeAllShipsPositions(),v=[],g.forEach(t=>{for(let e=0;e<t.quantity;e+=1){const n=E();let i="",r=[];0===Math.floor(2*Math.random())?(i="horizontal",r=$(n,t.size-1,i)):(i="vertical",r=$(n,t.size-1,i)),y(r)?b(`${t.name}-${e}`,r,i):e-=1}}),(()=>{for(let t=0;t<v.length;t+=1)i.addPlayerShip(h(v[t][0],v[t][0].split("-")[0],v[t][1].length)),i.addShipPositions(v[t][0],v[t][1]),i.addPlayerPositions(v[t][1])})(),(()=>{for(let t=0;t<v.length;t+=1){const e=document.getElementById(v[t][0]);document.getElementById(`cell-${v[t][1][0]}`).appendChild(e),e.className=`ship-${v[t][0]} dropped ${v[t][2]}-${v[t][0].split("-")[0]}`}})()};m(),(S=document.getElementById("user-options")).innerHTML='\n    <button id="btn-randomize" class="btn-randomize">Random</button>\n  ',(t=>{t.addEventListener("click",()=>{z()})})(S),f()}]);