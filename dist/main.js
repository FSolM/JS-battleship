!function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var s=(()=>{let e=[],t=[],n=[],s=[];const r=(e,t)=>{for(let n=0;n<t.length;n+=1)if(t[n].getID()===e)return t[n]},i=()=>{20===e.length?document.getElementById("btn-game-start").disabled=!1:document.getElementById("btn-game-start").disabled=!0};return{getPositions:(t=!0)=>t?e:n,addPositions:(t,s=!0)=>{s?(t.forEach(t=>{e.push(t)}),i()):t.forEach(e=>{n.push(e)})},addPosition:(t,s=!0)=>s?e.push(t):n.push(t),addShip:(e,n=!0)=>{n?t.push(e):s.push(e)},getShip:(e,n=!0)=>{const r=n?t:s;for(let t=0;t<r.length;t+=1)if(r[t].getID()===e)return r[t]},getShips:(e=!0)=>e?t:n,addShipPositions:(e,n,i=!0)=>{const o=r(e,i?t:s);return n.forEach(e=>{o.addPosition(e)}),o.getPositions()},isInvalidPosition:(i,o,a=!0)=>{let l=r(o,a?t:s);const d=a?e:n,c=l.getPositions();for(let e=0;e<i.length;e+=1)if(d.includes(i[e])&&!c.includes(i[e]))return!0;return!1},removePosition:(t,s=!0)=>{s?e.splice(e.indexOf(t),1):n.splice(n.indexOf(t),1)},removeAllShipsPositions:(r=!0)=>{r?(t.forEach(e=>{e.resetPositions()}),t=[],e=[]):(s.forEach(e=>{e.resetPositions()}),s=[],n=[]),i()},removePositions:(t,s=!0)=>{s?t.forEach(t=>{const n=e.indexOf(t);e.splice(n,1)}):t.forEach(e=>{const t=n.indexOf(e);n.splice(t,1)})},removeShipPositions:(e,n,o=!0)=>{let a=r(e,o?t:s);return i(),a.removePositions(n)},resetShipPositions:(e,n=!0)=>{return r(e,n?t:s).resetPositions()},hasPosition:(t,s=!0)=>s?e.includes(t):n.includes(t),removeLastPosition:(t=!0)=>{t?e.pop():n.pop(),i()},hasPositions:(t,s=!0)=>{const r=s?e:n;for(let e=0;e<t.length;e+=1)if(r.includes(t[e]))return!0;return!1},reinitialize:()=>{e=[],t=[],n=[],s=[]},hitShipByCell:(e,n=!0)=>{const r=n?t:s;for(let t=0;t<r.length;t+=1)if(r[t].getPositions().includes(e))return r[t].hit(e,n)}}})(),r=(()=>{let e="";const t=()=>e,n=e=>e.match(/battleship/)?4:e.match(/cruiser/)?3:e.match(/destroyer/)?2:e.match(/submarine/)?1:void 0,r=(e,t,n)=>{const s=parseInt(e.match(/\d+/)[0]),r=e.substring(5).match(/[a-j]/)[0],i=t.match(/horizontal|vertical/)[0],o="abcdefghij".split("");let a=[];if(n>1)for(let e=1;e<n;e+=1)"horizontal"===i?a.push(`${s}-${o[o.indexOf(r)+e]}`):"vertical"===i&&a.push(`${s+e}-${r}`);return a},i=e=>{const t=e.split(" ");return t.splice(1,0,"dropped"),t.join(" ")},o=e=>{const t=e.dataTransfer.getData("text"),o=document.getElementById(t),a=s.resetShipPositions(t);a&&s.removePositions(a),e.target.appendChild(o),((e,t,i)=>{const o=e.id.substring(5),a=n(i),l=[o,...r(e.id,t.className,a)],d=s.addShipPositions(i,l);d&&s.addPositions(d)})(e.target,o,t),o.className=i(o.className)},a=(e,t,n)=>{e.classList.remove(t);let s="";t.includes("vertical")?s="horizontal":t.includes("horizontal")&&(s="vertical"),e.classList.add(`${s}${t.substring(n)}`)};return{dragOver:e=>{e.preventDefault()},dragEnter:e=>{e.preventDefault()},dragLeave:e=>{e.preventDefault()},drop:e=>{e.preventDefault(),(e=>{const i=t(),o=document.getElementById(i),a=r(e.target.id,o.className,n(i)),l=[e.target.id.substring(5),...a];for(let e=0;e<l.length;e+=1)if(l[e].match(/undefined/)||parseInt(l[e].match(/\d+/)[0])>10)return!0;return s.isInvalidPosition(l,i)})(e)||/^cell/.test(e.target.id)&&o(e)},dragStart:t=>{t.target.classList.add("drag-start"),t.dataTransfer.setData("text",t.target.id),(t=>{e=t})(t.target.id),setTimeout(()=>t.target.classList.add("invisible"),0)},dragEnd:e=>{e.target.classList.remove("invisible"),e.target.classList.remove("drag-start")},rotate:e=>{const t=s.getShip(e.target.id),n=parseInt(t.getPositions()[0].match(/\d+/)[0]),r=t.getPositions()[0].match(/[a-j]/)[0],i=e.target.className.match(/horizontal|vertical/)[0],o="abcdefghij".split("");let l=[];if(t.getPositions().length>1)for(let e=1;e<t.getPositions().length;e+=1)"vertical"===i?l.push(`${n}-${o[o.indexOf(r)+e]}`):"horizontal"===i&&l.push(`${n+e}-${r}`);for(let e=0;e<l.length;e+=1)if(l[e].match(/undefined/)||parseInt(l[e].match(/\d+/)[0])>10)return;if(!s.isInvalidPosition(l,e.target.id)){const n=t.overridePositions(l);s.removePositions(n),s.addPositions(l),(e=>{e.target.classList.forEach(t=>{/^horizontal/.test(t)?a(e.target,t,10):/^vertical/.test(t)&&a(e.target,t,8)})})(e)}},getDragged:t,getPositions:r,splitClasses:i,getSize:n}})(),i=(e,t,n)=>{let s=[],r=[];const i=()=>s.length===r.length;return{getID:()=>e,getType:()=>t,getSize:()=>n,getPositions:()=>s,addPosition:e=>{s.push(e)},overridePositions:e=>{const t=s[0],n=[...s].splice(1);return s=[t,...e],n},resetPositions:()=>{const e=[...s];return s=[],e},hit:e=>(r.push(e),!!i()&&s),isSunk:i}};var o=[{size:4,quantity:1,name:"battleship"},{size:3,quantity:2,name:"cruiser"},{size:2,quantity:3,name:"destroyer"},{size:1,quantity:4,name:"submarine"}];var a=()=>{(()=>{const e=document.getElementById("ships");let t="";o.forEach(e=>{const n=e.quantity;for(let r=0;r<n;r+=1){const n=i(`${e.name}-${r}`,e.name,e.size);s.addShip(n),t+=`<div id="${e.name}-${r}" class="ship-${e.name}-${r} horizontal-${e.name}" draggable="true"></div>`}}),e.innerHTML=t})(),document.querySelectorAll('*[class^="ship"]').forEach(e=>{e.addEventListener("dragstart",r.dragStart,!1),e.addEventListener("dragend",r.dragEnd,!1),e.addEventListener("click",r.rotate,!1)}),(()=>{const e=document.querySelectorAll(".cell");for(const t of e)t.addEventListener("dragover",r.dragOver,!1),t.addEventListener("dragenter",r.dragEnter,!1),t.addEventListener("dragleave",r.dragLeave,!1),t.addEventListener("drop",r.drop,!1)})()};const l=(e,t,n)=>e>=0&&e<n-1&&0===t?"first-border":e===n-1&&0===t?"bottom-right-border":e===n-1&&t>0?"last-row-inner-border":"inner-border",d=()=>{const e=document.createElement("div");e.classList.add("number-index");let t='<div class="number-index-item number-index-item-special"></div>';for(let e=1;e<=10;e+=1)t+=`<div class="number-index-item">${e}</div>`;return e.innerHTML=t,e};var c=e=>{((e="board")=>{const t=document.getElementById(e);t.innerHTML="";let n='<div class="letters-index">';const s="abcdefghij".split("");for(let e=0;e<10;e+=1)n+=`<div class="board-letters"> ${s[e]} </div>`;n+="</div>",t.innerHTML+=n;for(let e=0;e<10;e+=1){let n=`<div id="cells-${e+1}" class="cells">`;for(let t=0;t<10;t+=1)n+=`<div id="cell-${e+1}-${s[t]}" class="cell ${l(e,t,10)} ${e+1}-${s[t]}"></div>`;n+="</div>",t.innerHTML+=n}if("board"==e){const e=document.getElementsByClassName("number-index")[0];if(!document.getElementsByClassName("container")[0].contains(e)){const e=document.getElementsByClassName("container")[0];e.insertBefore(d(),e.children[1])}}else{const e=document.getElementsByClassName("container")[1];e.insertBefore(d(),e.children[1])}})(e)};const u="abcdefghij".split("");let m=[];const h=e=>{for(let t=0;t<e.length;t+=1){const n=e[t].split("-");if(e[t].includes("undefined"))return!1;if(n[0]>10||n[1]>"j")return!1;for(let n=0;n<m.length;n+=1)if(m[n][1].includes(e[t]))return!1}return!0},g=(e,t,n)=>{m.push([e,[...t],n])},f=(e,t,n)=>{let s=[e];const r=e.split("-"),i=parseInt(r[0]),o=r[1];if("horizontal"===n)for(let e=0;e<t;e+=1)s.push(`${i}-${u[u.indexOf(o)+e+1]}`);else for(let e=0;e<t;e+=1)s.push(`${i+e+1}-${o}`);return s},p=()=>`${Math.floor(10*Math.random())+1}-${u[Math.floor(10*Math.random())]}`,v=()=>{o.forEach(e=>{for(let t=0;t<e.quantity;t+=1){const n=p();let s="",r=[];0===Math.floor(2*Math.random())?(s="horizontal",r=f(n,e.size-1,s)):(s="vertical",r=f(n,e.size-1,s)),h(r)?g(`${e.name}-${t}`,r,s):t-=1}})},b=e=>{for(let t=0;t<m.length;t+=1)s.addShip(i(m[t][0],m[t][0].split("-")[0],m[t][1].length),e),s.addShipPositions(m[t][0],m[t][1],e),s.addPositions(m[t][1],e)};var E=(e=!0)=>{e?(c(),a(),s.removeAllShipsPositions(),m=[],v(),b(e),(()=>{for(let e=0;e<m.length;e+=1){const t=document.getElementById(m[e][0]);document.getElementById(`cell-${m[e][1][0]}`).appendChild(t),t.className=`ship-${m[e][0]} dropped ${m[e][2]}-${m[e][0].split("-")[0]}`}})()):(v(),b(e)),m=[]};var y=(e,t)=>(s.removePosition(e,!t),(e=>0===s.getPositions(!e).length)(t)),L=(()=>{let e=[];const t="abcdefghij".split(""),n=()=>Math.floor(10*Math.random()+1),s=()=>t[Math.floor(10*Math.random())];return{play:()=>{const t=(()=>{let t="";do{t=`cell-${n()}-${s()}`}while(e.includes(t));return t})();e.push(t),I(!1,t)},restartMovements:()=>{e=[]}}})();const P=()=>{document.getElementById("restart").addEventListener("click",()=>{document.querySelector(".winner").classList.toggle("set-hidden"),(()=>{L.restartMovements(),s.reinitialize(),document.getElementById("user-options").classList.remove("set-hidden"),document.getElementById("ships").classList.remove("set-hidden"),document.getElementsByClassName("container")[0].classList.add("full-size");const e=document.getElementById("b-board");e.innerHTML="";const t=document.getElementsByClassName("container")[1];t.innerHTML="",t.appendChild(e),document.getElementById("btn-game-start").disabled=!0,c(),a()})()})};var $=e=>{((e,t)=>{let n=(e=>e?"Player Won!":"AI won!")(t);e.classList.toggle("set-hidden"),e.innerHTML=`\n    <h1>${n}</h1>\n    <button id="restart">Restart</button>`})(document.querySelector(".winner"),e),(()=>{const e=document.getElementById("b-board");for(let t=0;t<e.children.length;t+=1)for(let n=0;n<e.children[t].children.length;n+=1)e.children[t].children[n].classList.add("pointer"),e.children[t].children[n].removeEventListener("click",S.eventFunction)})(),P()};const B=(e,t)=>{const n=(e=>e?document.getElementById("b-board"):document.getElementById("board"))(t);for(let t=0;t<n.children.length;t+=1)for(let s=0;s<n.children[t].children.length;s+=1)if(n.children[t].children[s].id===e)return n.children[t].children[s]};var I=(e,t)=>{const n=t.replace("cell-","");if(s.getPositions(!e).includes(n)){const r=s.hitShipByCell(n,!e);B(t,e).classList.add("hit"),r&&((e,t)=>{let n=e?"board":"b-board";const s=document.getElementById(n);switch((e=>1===e.length?"square":e[0][0]===e[1][0]?"horizontal":"vertical")(t)){case"square":{const e=s.getElementsByClassName(t[0])[0];e.classList.add("sunk-square"),e.classList.add("sunk");break}case"horizontal":for(let e=0;e<t.length;e+=1){let n="";n=0===e?"sunk-h-first":e===t.length-1?"sunk-h-last":"sunk-h-inner";const r=s.getElementsByClassName(t[e])[0];r.classList.add(n),r.classList.add("sunk")}break;case"vertical":for(let e=0;e<t.length;e+=1){let n="";n=0===e?"sunk-v-first":e===t.length-1?"sunk-v-last":"sunk-v-inner";const r=s.getElementsByClassName(t[e])[0];r.classList.add(n),r.classList.add("sunk")}break;default:console.error("Something unexpected happened")}})(!e,r),y(n,e)&&$(e),e||L.play()}else B(t,e).classList.add("missed"),e&&L.play()},S=(()=>{const e=t=>{const n=t.target.id;I(!0,n),t.target.classList.remove("pointer"),t.target.removeEventListener("click",e)};return{init:()=>{(()=>{const t=document.getElementById("b-board");for(let n=1;n<t.children.length;n+=1)for(let s=0;s<t.children[n].children.length;s+=1)t.children[n].children[s].classList.add("pointer"),t.children[n].children[s].addEventListener("click",e)})()},eventFunction:e}})();var z=()=>{(()=>{const e=document.querySelectorAll('*[class^="ship"]');document.querySelectorAll('*[class^="cell"]').forEach(e=>{e.removeEventListener("dragover",r.dragOver),e.removeEventListener("dragenter",r.dragEnter),e.removeEventListener("dragleave",r.dragLeave),e.removeEventListener("drop",r.drop)}),e.forEach(e=>{e.draggable=!1,e.removeEventListener("dragstart",r.dragStart,!1),e.removeEventListener("dragend",r.dragEnd,!1),e.removeEventListener("click",r.rotate,!1)})})(),document.getElementById("user-options").classList.add("set-hidden"),document.getElementById("ships").classList.add("set-hidden"),document.getElementsByClassName("container")[0].classList.remove("full-size"),(()=>{const e=document.getElementsByClassName("dropped");for(let t=0;t<e.length;t+=1)e[t].classList.add("downgrade")})(),c("b-board"),E(!1),S.init()};c(),document.getElementById("user-options").innerHTML='\n    <button id="btn-randomize" class="btn-randomize">Random</button><br>\n    <button id="btn-game-start" class="btn-game-start">Start Game</button>\n  ',(e=>{e.addEventListener("click",()=>{E()})})(document.getElementById("btn-randomize")),(e=>{e.disabled=!0,e.addEventListener("click",()=>{z()})})(document.getElementById("btn-game-start")),a()}]);