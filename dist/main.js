!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var n=(()=>{let e=[],t=[];const r=e=>{for(let r=0;r<t.length;r+=1)if(t[r].getID()===e)return t[r]},n=()=>{20===e.length?document.getElementById("btn-game-start").disabled=!1:document.getElementById("btn-game-start").disabled=!0};return{getPlayerPositions:()=>e,addPlayerPositions:t=>{t.forEach(t=>{e.push(t)}),n()},addPlayerPosition:t=>e.push(t),addPlayerShip:e=>{t.push(e)},getShip:r,addShipPositions:(e,r)=>{for(let n=0;n<t.length;n+=1)if(t[n].getID()===e)return r.forEach(e=>{t[n].addPosition(e)}),t[n].getPositions()},isInvalidPosition:(t,n)=>{const i=r(n).getPositions();for(let r=0;r<t.length;r+=1)if(e.includes(t[r])&&!i.includes(t[r]))return!0;return!1},removeAllShipsPositions:()=>{t.forEach(e=>{e.resetPositions()}),e=[],t=[],n()},removePlayerPositions:t=>{t.forEach(t=>{const r=e.indexOf(t);e.splice(r,1)})},removeShipPositions:(e,r)=>{for(let i=0;i<t.length;i+=1)if(t[i].getID()===e){n(),t[i].removePositions(r);break}},resetShipPositions:e=>{for(let r=0;r<t.length;r+=1)if(t[r].getID()===e)return t[r].resetPositions()},hasPlayerPosition:t=>e.includes(t),removeLastPlayerPosition:()=>{e.pop(),n()},hasPlayerPositions:t=>{for(let r=0;r<t.length;r+=1)if(e.includes(t[r]))return!0;return!1}}})(),i=(()=>{let e="";const t=()=>e,r=e=>e.match(/battleship/)?4:e.match(/cruiser/)?3:e.match(/destroyer/)?2:e.match(/submarine/)?1:void 0,i=(e,t,r)=>{const n=parseInt(e.match(/\d+/)[0]),i=e.substring(5).match(/[a-j]/)[0],s=t.match(/horizontal|vertical/)[0],a="abcdefghij".split("");let o=[];if(r>1)for(let e=1;e<r;e+=1)"horizontal"===s?o.push(`${n}-${a[a.indexOf(i)+e]}`):"vertical"===s&&o.push(`${n+e}-${i}`);return o},s=e=>{const t=e.dataTransfer.getData("text"),s=document.getElementById(t),a=n.resetShipPositions(t);a&&n.removePlayerPositions(a),e.target.appendChild(s),((e,t,s)=>{const a=e.id.substring(5),o=r(s),d=[a,...i(e.id,t.className,o)],l=n.addShipPositions(s,d);l&&n.addPlayerPositions(l)})(e.target,s,t),s.className=(e=>{const t=e.split(" ");return t.splice(1,0,"dropped"),t.join(" ")})(s.className)},a=(e,t,r)=>{e.classList.remove(t);let n="";t.includes("vertical")?n="horizontal":t.includes("horizontal")&&(n="vertical"),e.classList.add(`${n}${t.substring(r)}`)};return{dragOver:e=>{e.preventDefault()},dragEnter:e=>{e.preventDefault()},dragLeave:e=>{e.preventDefault()},drop:e=>{e.preventDefault(),(e=>{const s=t(),a=document.getElementById(s),o=i(e.target.id,a.className,r(s)),d=[e.target.id.substring(5),...o];for(let e=0;e<d.length;e+=1)if(d[e].match(/undefined/)||parseInt(d[e].match(/\d+/)[0])>10)return!0;return n.isInvalidPosition(d,s)})(e)||/^cell/.test(e.target.id)&&s(e)},dragStart:t=>{t.target.classList.add("drag-start"),t.dataTransfer.setData("text",t.target.id),(t=>{e=t})(t.target.id),setTimeout(()=>t.target.classList.add("invisible"),0)},dragEnd:e=>{e.target.classList.remove("invisible"),e.target.classList.remove("drag-start")},rotate:e=>{const t=n.getShip(e.target.id),r=parseInt(t.getPositions()[0].match(/\d+/)[0]),i=t.getPositions()[0].match(/[a-j]/)[0],s=e.target.className.match(/horizontal|vertical/)[0],o="abcdefghij".split("");let d=[];if(t.getPositions().length>1)for(let e=1;e<t.getPositions().length;e+=1)"vertical"===s?d.push(`${r}-${o[o.indexOf(i)+e]}`):"horizontal"===s&&d.push(`${r+e}-${i}`);for(let e=0;e<d.length;e+=1)if(d[e].match(/undefined/)||parseInt(d[e].match(/\d+/)[0])>10)return;if(!n.isInvalidPosition(d,e.target.id)){const r=t.overridePositions(d);n.removePlayerPositions(r),n.addPlayerPositions(d),(e=>{e.target.classList.forEach(t=>{/^horizontal/.test(t)?a(e.target,t,10):/^vertical/.test(t)&&a(e.target,t,8)})})(e)}},getDragged:t}})(),s=(e,t,r)=>{let n=[],i=[];return{getID:()=>e,getType:()=>t,getSize:()=>r,getPositions:()=>n,addPosition:e=>{n.push(e)},overridePositions:e=>{const t=n[0],r=[...n].splice(1);return n=[t,...e],r},resetPositions:()=>{const e=[...n];return n=[],e},hit:e=>{i.push(e)},isSunk:()=>n.length===i.length}};var a=[{size:4,quantity:1,name:"battleship"},{size:3,quantity:2,name:"cruiser"},{size:2,quantity:3,name:"destroyer"},{size:1,quantity:4,name:"submarine"}];var o=()=>{(()=>{const e=document.getElementById("ships");let t="";a.forEach(e=>{const r=e.quantity;for(let i=0;i<r;i+=1){const r=s(`${e.name}-${i}`,e.name,e.size);n.addPlayerShip(r),t+=`<div id="${e.name}-${i}" class="ship-${e.name}-${i} horizontal-${e.name}" draggable="true"></div>`}}),e.innerHTML=t})(),document.querySelectorAll('*[class^="ship"]').forEach(e=>{e.addEventListener("dragstart",i.dragStart,!1),e.addEventListener("dragend",i.dragEnd,!1),e.addEventListener("click",i.rotate,!1)}),(()=>{const e=document.querySelectorAll(".cell");for(const t of e)t.addEventListener("dragover",i.dragOver,!1),t.addEventListener("dragenter",i.dragEnter,!1),t.addEventListener("dragleave",i.dragLeave,!1),t.addEventListener("drop",i.drop,!1)})()};const d=(e,t,r)=>e>=0&&e<r-1&&0===t?"first-border":e===r-1&&0===t?"bottom-right-border":e===r-1&&t>0?"last-row-inner-border":"inner-border";var l=e=>{((e="board")=>{const t=document.getElementById(e);t.innerHTML="";const r=["a","b","c","d","e","f","g","h","i","j"];for(let e=0;e<10;e+=1){let n=`<div id="cells-${e+1}" class="cells">`;for(let t=0;t<10;t+=1)n+=`<div id="cell-${e+1}-${r[t]}" class="cell ${d(e,t,10)}"></div>`;n+="</div>",t.innerHTML+=n}})(e)};const c="abcdefghij".split("");let u=[];const g=e=>{for(let t=0;t<e.length;t+=1){const r=e[t].split("-");if(e[t].includes("undefined"))return!1;if(r[0]>10||r[1]>"j")return!1;for(let r=0;r<u.length;r+=1)if(u[r][1].includes(e[t]))return!1}return!0},m=(e,t,r)=>{u.push([e,[...t],r])},h=(e,t,r)=>{let n=[e];const i=e.split("-"),s=parseInt(i[0]),a=i[1];if("horizontal"===r)for(let e=0;e<t;e+=1)n.push(`${s}-${c[c.indexOf(a)+e+1]}`);else for(let e=0;e<t;e+=1)n.push(`${s+e+1}-${a}`);return n},f=()=>`${Math.floor(10*Math.random())+1}-${c[Math.floor(10*Math.random())]}`;var p=()=>{l(),o(),n.removeAllShipsPositions(),u=[],a.forEach(e=>{for(let t=0;t<e.quantity;t+=1){const r=f();let n="",i=[];0===Math.floor(2*Math.random())?(n="horizontal",i=h(r,e.size-1,n)):(n="vertical",i=h(r,e.size-1,n)),g(i)?m(`${e.name}-${t}`,i,n):t-=1}}),(()=>{for(let e=0;e<u.length;e+=1)n.addPlayerShip(s(u[e][0],u[e][0].split("-")[0],u[e][1].length)),n.addShipPositions(u[e][0],u[e][1]),n.addPlayerPositions(u[e][1])})(),(()=>{for(let e=0;e<u.length;e+=1){const t=document.getElementById(u[e][0]);document.getElementById(`cell-${u[e][1][0]}`).appendChild(t),t.className=`ship-${u[e][0]} dropped ${u[e][2]}-${u[e][0].split("-")[0]}`}})()};var v=()=>{(()=>{const e=document.querySelectorAll('*[class^="ship"]');document.querySelectorAll('*[class^="cell"]').forEach(e=>{e.removeEventListener("dragover",i.dragOver),e.removeEventListener("dragenter",i.dragEnter),e.removeEventListener("dragleave",i.dragLeave),e.removeEventListener("drop",i.drop)}),e.forEach(e=>{e.draggable=!1,e.removeEventListener("dragstart",i.dragStart,!1),e.removeEventListener("dragend",i.dragEnd,!1),e.removeEventListener("click",i.rotate,!1)})})(),document.getElementById("user-options").classList.add("set-hidden"),document.getElementById("ships").classList.add("set-hidden"),document.getElementsByClassName("container")[0].classList.remove("full-size"),l("b-board")};l(),document.getElementById("user-options").innerHTML='\n    <button id="btn-randomize" class="btn-randomize">Random</button><br>\n    <button id="btn-game-start" class="btn-game-start">Start Game</button>\n  ',(e=>{e.addEventListener("click",()=>{p()})})(document.getElementById("btn-randomize")),(e=>{e.disabled=!0,e.addEventListener("click",()=>{v()})})(document.getElementById("btn-game-start")),o()}]);