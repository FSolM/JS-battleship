!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r=(()=>{let t=[],e=[];const n=t=>{for(let n=0;n<e.length;n+=1)if(e[n].getID()===t)return e[n]};return{getPlayerPositions:()=>t,addPlayerPositions:e=>{e.forEach(e=>{t.push(e)})},addPlayerPosition:e=>t.push(e),addPlayerShip:t=>{e.push(t)},getShip:n,addShipPositions:(t,n)=>{for(let r=0;r<e.length;r+=1)if(e[r].getID()===t)return n.forEach(t=>{e[r].addPosition(t)}),e[r].getPositions()},isInvalidPosition:(e,r)=>{const i=n(r).getPositions();for(let n=0;n<e.length;n+=1)if(t.includes(e[n])&&!i.includes(e[n]))return!0;return!1},removeAllShipsPositions:()=>{e.forEach(t=>{t.resetPositions()}),t=[],e=[]},removePlayerPositions:e=>{e.forEach(e=>{const n=t.indexOf(e);t.splice(n,1)})},removeShipPositions:(t,n)=>{for(let r=0;r<e.length;r+=1)if(e[r].getID()===t){e[r].removePositions(n);break}},resetShipPositions:t=>{for(let n=0;n<e.length;n+=1)if(e[n].getID()===t)return e[n].resetPositions()},hasPlayerPosition:e=>t.includes(e),removeLastPlayerPosition:()=>{t.pop()},hasPlayerPositions:e=>{for(let n=0;n<e.length;n+=1)if(t.includes(e[n]))return!0;return!1}}})(),i=(()=>{let t="";const e=e=>{e.target.classList.add("drag-start"),e.dataTransfer.setData("text",e.target.id),(e=>{t=e})(e.target.id),setTimeout(()=>e.target.classList.add("invisible"),0)},n=t=>{t.target.classList.remove("invisible"),t.target.classList.remove("drag-start")},i=t=>{const e=r.getShip(t.target.id),n=parseInt(e.getPositions()[0].match(/\d+/)[0]),i=e.getPositions()[0].match(/[a-j]/)[0],s=t.target.className.match(/horizontal|vertical/)[0],a="abcdefghij".split("");let l=[];if(e.getPositions().length>1)for(let t=1;t<e.getPositions().length;t+=1)"vertical"===s?l.push(`${n}-${a[a.indexOf(i)+t]}`):"horizontal"===s&&l.push(`${n+t}-${i}`);for(let t=0;t<l.length;t+=1)if(l[t].match(/undefined/)||parseInt(l[t].match(/\d+/)[0])>10)return;if(!r.isInvalidPosition(l,t.target.id)){const n=e.overridePositions(l);r.removePlayerPositions(n),r.addPlayerPositions(l),o(t)}},s=(t,e,n)=>{t.classList.remove(e);let r="";e.includes("vertical")?r="horizontal":e.includes("horizontal")&&(r="vertical"),t.classList.add(`${r}${e.substring(n)}`)},o=t=>{t.target.classList.forEach(e=>{/^horizontal/.test(e)?s(t.target,e,10):/^vertical/.test(e)&&s(t.target,e,8)})};return{init:()=>{const t=document.querySelectorAll('*[class^="ship"]');for(const r of t)r.addEventListener("dragstart",e,!1),r.addEventListener("dragend",n,!1),r.addEventListener("click",i,!1)},getDragged:()=>t}})();const s=t=>{t.preventDefault()},o=t=>{t.preventDefault()},a=t=>{t.preventDefault()},l=t=>t.match(/battleship/)?4:t.match(/cruiser/)?3:t.match(/destroyer/)?2:t.match(/submarine/)?1:void 0,d=(t,e,n)=>{const r=parseInt(t.match(/\d+/)[0]),i=t.substring(5).match(/[a-j]/)[0],s=e.match(/horizontal|vertical/)[0],o="abcdefghij".split("");let a=[];if(n>1)for(let t=1;t<n;t+=1)"horizontal"===s?a.push(`${r}-${o[o.indexOf(i)+t]}`):"vertical"===s&&a.push(`${r+t}-${i}`);return a},c=t=>{const e=t.dataTransfer.getData("text"),n=document.getElementById(e),i=r.resetShipPositions(e);i&&r.removePlayerPositions(i),t.target.appendChild(n),((t,e,n)=>{const i=t.id.substring(5),s=l(n),o=[i,...d(t.id,e.className,s)],a=r.addShipPositions(n,o);a&&r.addPlayerPositions(a)})(t.target,n,e),n.className=(t=>{const e=t.split(" ");return e.splice(1,0,"dropped"),e.join(" ")})(n.className)},u=t=>{t.preventDefault(),(t=>{const e=i.getDragged(),n=document.getElementById(e),s=d(t.target.id,n.className,l(e)),o=[t.target.id.substring(5),...s];for(let t=0;t<o.length;t+=1)if(o[t].match(/undefined/)||parseInt(o[t].match(/\d+/)[0])>10)return!0;return r.isInvalidPosition(o,e)})(t)||/^cell/.test(t.target.id)&&c(t)};var h=(t,e,n)=>{let r=[],i=[];return{getID:()=>t,getType:()=>e,getSize:()=>n,getPositions:()=>r,addPosition:t=>{r.push(t)},overridePositions:t=>{const e=r[0],n=[...r].splice(1);return r=[e,...t],n},resetPositions:()=>{const t=[...r];return r=[],t},hit:t=>{i.push(t)},isSunk:()=>r.length===i.length}};var f=[{size:4,quantity:1,name:"battleship"},{size:3,quantity:2,name:"cruiser"},{size:2,quantity:3,name:"destroyer"},{size:1,quantity:4,name:"submarine"}];var g=()=>{(()=>{const t=document.getElementById("ships");let e="";f.forEach(t=>{const n=t.quantity;for(let i=0;i<n;i+=1){const n=h(`${t.name}-${i}`,t.name,t.size);r.addPlayerShip(n),e+=`<div id="${t.name}-${i}" class="ship-${t.name}-${i} horizontal-${t.name}" draggable="true"></div>`}}),t.innerHTML=e})(),i.init(),(()=>{const t=document.querySelectorAll(".cell");for(const e of t)e.addEventListener("dragover",s,!1),e.addEventListener("dragenter",o,!1),e.addEventListener("dragleave",a,!1),e.addEventListener("drop",u,!1)})()};const p=(t,e,n)=>t>=0&&t<n-1&&0===e?"first-border":t===n-1&&0===e?"bottom-right-border":t===n-1&&e>0?"last-row-inner-border":"inner-border";var m=()=>{(()=>{const t=document.getElementById("board");t.innerHTML="";const e=["a","b","c","d","e","f","g","h","i","j"];for(let n=0;n<10;n+=1){let r=`<div id="cells-${n+1}" class="cells">`;for(let t=0;t<10;t+=1)r+=`<div id="cell-${n+1}-${e[t]}" class="cell ${p(n,t,10)}"></div>`;r+="</div>",t.innerHTML+=r}})()};const v="abcdefghij".split("");let P=[];const y=t=>{for(let e=0;e<t.length;e+=1){const n=t[e].split("-");if(t[e].includes("undefined"))return!1;if(n[0]>10||n[1]>"j")return!1;for(let n=0;n<P.length;n+=1)if(P[n][1].includes(t[e]))return!1}return!0},b=(t,e,n)=>{P.push([t,[...e],n])},$=(t,e,n)=>{let r=[t];const i=t.split("-"),s=parseInt(i[0]),o=i[1];if("horizontal"===n)for(let t=0;t<e;t+=1)r.push(`${s}-${v[v.indexOf(o)+t+1]}`);else for(let t=0;t<e;t+=1)r.push(`${s+t+1}-${o}`);return r},E=()=>`${Math.floor(10*Math.random())+1}-${v[Math.floor(10*Math.random())]}`;var S,z=()=>{m(),g(),r.removeAllShipsPositions(),P=[],f.forEach(t=>{for(let e=0;e<t.quantity;e+=1){const n=E();let r="",i=[];0===Math.floor(2*Math.random())?(r="horizontal",i=$(n,t.size-1,r)):(r="vertical",i=$(n,t.size-1,r)),y(i)?b(`${t.name}-${e}`,i,r):e-=1}}),(()=>{for(let t=0;t<P.length;t+=1)r.addPlayerShip(h(P[t][0],P[t][0].split("-")[0],P[t][1].length)),r.addShipPositions(P[t][0],P[t][1]),r.addPlayerPositions(P[t][1])})(),(()=>{for(let t=0;t<P.length;t+=1){const e=document.getElementById(P[t][0]);document.getElementById(`cell-${P[t][1][0]}`).appendChild(e),e.className=`ship-${P[t][0]} dropped ${P[t][2]}-${P[t][0].split("-")[0]}`}})()};m(),(S=document.getElementById("user-options")).innerHTML='\n    <button id="btn-randomize" class="btn-randomize">Random</button>\n  ',(t=>{t.addEventListener("click",()=>{z()})})(S),g()}]);