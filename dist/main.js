!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var n=(()=>{let e=[],t=[],r=[],n=[];const s=(e,t)=>{for(let r=0;r<t.length;r+=1)if(t[r].getID()===e)return t[r]},i=()=>{20===e.length?document.getElementById("btn-game-start").disabled=!1:document.getElementById("btn-game-start").disabled=!0};return{getPositions:(t=!0)=>t?e:r,addPositions:(t,n=!0)=>{n?(t.forEach(t=>{e.push(t)}),i()):t.forEach(e=>{r.push(e)})},addPosition:(t,n=!0)=>n?e.push(t):r.push(t),addShip:(e,r=!0)=>{r?t.push(e):n.push(e)},getShip:(e,r=!0)=>{const s=r?t:n;for(let t=0;t<s.length;t+=1)if(s[t].getID()===e)return s[t]},addShipPositions:(e,r,i=!0)=>{const o=s(e,i?t:n);return r.forEach(e=>{o.addPosition(e)}),o.getPositions()},isInvalidPosition:(i,o,a=!0)=>{let d=s(o,a?t:n);const l=a?e:r,c=d.getPositions();for(let e=0;e<i.length;e+=1)if(l.includes(i[e])&&!c.includes(i[e]))return!0;return!1},removeAllShipsPositions:(s=!0)=>{s?(t.forEach(e=>{e.resetPositions()}),t=[],e=[]):(n.forEach(e=>{e.resetPositions()}),n=[],r=[]),i()},removePositions:(t,n=!0)=>{n?t.forEach(t=>{const r=e.indexOf(t);e.splice(r,1)}):t.forEach(e=>{const t=r.indexOf(e);r.splice(t,1)})},removeShipPositions:(e,r,o=!0)=>{let a=s(e,o?t:n);return i(),a.removePositions(r)},resetShipPositions:(e,r=!0)=>{return s(e,r?t:n).resetPositions()},hasPosition:(t,n=!0)=>n?e.includes(t):r.includes(t),removeLastPosition:(t=!0)=>{t?e.pop():r.pop(),i()},hasPositions:(t,n=!0)=>{const s=n?e:r;for(let e=0;e<t.length;e+=1)if(s.includes(t[e]))return!0;return!1}}})(),s=(()=>{let e="";const t=()=>e,r=e=>e.match(/battleship/)?4:e.match(/cruiser/)?3:e.match(/destroyer/)?2:e.match(/submarine/)?1:void 0,s=(e,t,r)=>{const n=parseInt(e.match(/\d+/)[0]),s=e.substring(5).match(/[a-j]/)[0],i=t.match(/horizontal|vertical/)[0],o="abcdefghij".split("");let a=[];if(r>1)for(let e=1;e<r;e+=1)"horizontal"===i?a.push(`${n}-${o[o.indexOf(s)+e]}`):"vertical"===i&&a.push(`${n+e}-${s}`);return a},i=e=>{const t=e.dataTransfer.getData("text"),i=document.getElementById(t),o=n.resetShipPositions(t);o&&n.removePositions(o),e.target.appendChild(i),((e,t,i)=>{const o=e.id.substring(5),a=r(i),d=[o,...s(e.id,t.className,a)],l=n.addShipPositions(i,d);l&&n.addPositions(l)})(e.target,i,t),i.className=(e=>{const t=e.split(" ");return t.splice(1,0,"dropped"),t.join(" ")})(i.className)},o=(e,t,r)=>{e.classList.remove(t);let n="";t.includes("vertical")?n="horizontal":t.includes("horizontal")&&(n="vertical"),e.classList.add(`${n}${t.substring(r)}`)};return{dragOver:e=>{e.preventDefault()},dragEnter:e=>{e.preventDefault()},dragLeave:e=>{e.preventDefault()},drop:e=>{e.preventDefault(),(e=>{const i=t(),o=document.getElementById(i),a=s(e.target.id,o.className,r(i)),d=[e.target.id.substring(5),...a];for(let e=0;e<d.length;e+=1)if(d[e].match(/undefined/)||parseInt(d[e].match(/\d+/)[0])>10)return!0;return n.isInvalidPosition(d,i)})(e)||/^cell/.test(e.target.id)&&i(e)},dragStart:t=>{t.target.classList.add("drag-start"),t.dataTransfer.setData("text",t.target.id),(t=>{e=t})(t.target.id),setTimeout(()=>t.target.classList.add("invisible"),0)},dragEnd:e=>{e.target.classList.remove("invisible"),e.target.classList.remove("drag-start")},rotate:e=>{const t=n.getShip(e.target.id),r=parseInt(t.getPositions()[0].match(/\d+/)[0]),s=t.getPositions()[0].match(/[a-j]/)[0],i=e.target.className.match(/horizontal|vertical/)[0],a="abcdefghij".split("");let d=[];if(t.getPositions().length>1)for(let e=1;e<t.getPositions().length;e+=1)"vertical"===i?d.push(`${r}-${a[a.indexOf(s)+e]}`):"horizontal"===i&&d.push(`${r+e}-${s}`);for(let e=0;e<d.length;e+=1)if(d[e].match(/undefined/)||parseInt(d[e].match(/\d+/)[0])>10)return;if(!n.isInvalidPosition(d,e.target.id)){const r=t.overridePositions(d);n.removePositions(r),n.addPositions(d),(e=>{e.target.classList.forEach(t=>{/^horizontal/.test(t)?o(e.target,t,10):/^vertical/.test(t)&&o(e.target,t,8)})})(e)}},getDragged:t}})(),i=(e,t,r)=>{let n=[],s=[];return{getID:()=>e,getType:()=>t,getSize:()=>r,getPositions:()=>n,addPosition:e=>{n.push(e)},overridePositions:e=>{const t=n[0],r=[...n].splice(1);return n=[t,...e],r},resetPositions:()=>{const e=[...n];return n=[],e},hit:e=>{s.push(e)},isSunk:()=>n.length===s.length}};var o=[{size:4,quantity:1,name:"battleship"},{size:3,quantity:2,name:"cruiser"},{size:2,quantity:3,name:"destroyer"},{size:1,quantity:4,name:"submarine"}];var a=()=>{(()=>{const e=document.getElementById("ships");let t="";o.forEach(e=>{const r=e.quantity;for(let s=0;s<r;s+=1){const r=i(`${e.name}-${s}`,e.name,e.size);n.addShip(r),t+=`<div id="${e.name}-${s}" class="ship-${e.name}-${s} horizontal-${e.name}" draggable="true"></div>`}}),e.innerHTML=t})(),document.querySelectorAll('*[class^="ship"]').forEach(e=>{e.addEventListener("dragstart",s.dragStart,!1),e.addEventListener("dragend",s.dragEnd,!1),e.addEventListener("click",s.rotate,!1)}),(()=>{const e=document.querySelectorAll(".cell");for(const t of e)t.addEventListener("dragover",s.dragOver,!1),t.addEventListener("dragenter",s.dragEnter,!1),t.addEventListener("dragleave",s.dragLeave,!1),t.addEventListener("drop",s.drop,!1)})()};const d=(e,t,r)=>e>=0&&e<r-1&&0===t?"first-border":e===r-1&&0===t?"bottom-right-border":e===r-1&&t>0?"last-row-inner-border":"inner-border";var l=e=>{((e="board")=>{const t=document.getElementById(e);t.innerHTML="";const r=["a","b","c","d","e","f","g","h","i","j"];for(let e=0;e<10;e+=1){let n=`<div id="cells-${e+1}" class="cells">`;for(let t=0;t<10;t+=1)n+=`<div id="cell-${e+1}-${r[t]}" class="cell ${d(e,t,10)}"></div>`;n+="</div>",t.innerHTML+=n}})(e)};const c="abcdefghij".split("");let u=[];const g=e=>{for(let t=0;t<e.length;t+=1){const r=e[t].split("-");if(e[t].includes("undefined"))return!1;if(r[0]>10||r[1]>"j")return!1;for(let r=0;r<u.length;r+=1)if(u[r][1].includes(e[t]))return!1}return!0},h=(e,t,r)=>{u.push([e,[...t],r]),console.log(u)},m=(e,t,r)=>{let n=[e];const s=e.split("-"),i=parseInt(s[0]),o=s[1];if("horizontal"===r)for(let e=0;e<t;e+=1)n.push(`${i}-${c[c.indexOf(o)+e+1]}`);else for(let e=0;e<t;e+=1)n.push(`${i+e+1}-${o}`);return n},f=()=>`${Math.floor(10*Math.random())+1}-${c[Math.floor(10*Math.random())]}`,p=()=>{o.forEach(e=>{for(let t=0;t<e.quantity;t+=1){const r=f();let n="",s=[];0===Math.floor(2*Math.random())?(n="horizontal",s=m(r,e.size-1,n)):(n="vertical",s=m(r,e.size-1,n)),g(s)?h(`${e.name}-${t}`,s,n):t-=1}})},v=e=>{for(let t=0;t<u.length;t+=1)n.addShip(i(u[t][0],u[t][0].split("-")[0],u[t][1].length),e),n.addShipPositions(u[t][0],u[t][1],e),n.addPositions(u[t][1],e)};var b=(e=!0)=>{e?(l(),a(),n.removeAllShipsPositions(),u=[],p(),v(e),(()=>{for(let e=0;e<u.length;e+=1){const t=document.getElementById(u[e][0]);document.getElementById(`cell-${u[e][1][0]}`).appendChild(t),t.className=`ship-${u[e][0]} dropped ${u[e][2]}-${u[e][0].split("-")[0]}`}})()):(p(),v(e)),u=[]};var E=()=>{(()=>{const e=document.querySelectorAll('*[class^="ship"]');document.querySelectorAll('*[class^="cell"]').forEach(e=>{e.removeEventListener("dragover",s.dragOver),e.removeEventListener("dragenter",s.dragEnter),e.removeEventListener("dragleave",s.dragLeave),e.removeEventListener("drop",s.drop)}),e.forEach(e=>{e.draggable=!1,e.removeEventListener("dragstart",s.dragStart,!1),e.removeEventListener("dragend",s.dragEnd,!1),e.removeEventListener("click",s.rotate,!1)})})(),document.getElementById("user-options").classList.add("set-hidden"),document.getElementById("ships").classList.add("set-hidden"),document.getElementsByClassName("container")[0].classList.remove("full-size"),l("b-board"),b(!1)};l(),document.getElementById("user-options").innerHTML='\n    <button id="btn-randomize" class="btn-randomize">Random</button><br>\n    <button id="btn-game-start" class="btn-game-start">Start Game</button>\n  ',(e=>{e.addEventListener("click",()=>{b()})})(document.getElementById("btn-randomize")),(e=>{e.disabled=!0,e.addEventListener("click",()=>{E()})})(document.getElementById("btn-game-start")),a()}]);