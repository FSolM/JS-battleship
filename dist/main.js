!function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var i=(()=>{let e=[],t=[];return{getPlayerPositions:()=>e,addPlayerPositions:t=>{t.forEach(t=>{e.push(t)})},addPlayerShip:e=>{t.push(e)},getShip:e=>{for(let r=0;r<t.length;r+=1)if(t[r].getID()===e)return t[r]},addShipPositions:(e,r)=>{for(let i=0;i<t.length;i+=1)if(t[i].getID()===e)return r.forEach(e=>t[i].addPosition(e)),t[i].getPositions()},removePlayerPositions:t=>{t.forEach(t=>{const r=e.indexOf(t);e.splice(r,1)})},removeShipPositions:(e,r)=>{for(let i=0;i<t.length;i+=1)if(t[i].getID()===e){t[i].removePositions(r);break}},resetShipPositions:e=>{for(let r=0;r<t.length;r+=1)if(t[r].getID()===e)return t[r].resetPositions()},hasPlayerPosition:t=>e.includes(t),removeLastPlayerPosition:()=>{e.pop()},hasPlayerPositions:t=>{for(let r=0;r<t.length;r+=1)if(e.includes(t[r]))return!0;return!1}}})(),n=(()=>{let e="";const t=t=>{t.target.classList.add("drag-start"),t.dataTransfer.setData("text",t.target.id);const r=i.resetShipPositions(t.target.id);r&&i.removePlayerPositions(r),(t=>{e=t})(t.target.id),setTimeout(()=>t.target.classList.add("invisible"),0)},r=e=>{e.target.classList.remove("invisible"),e.target.classList.remove("drag-start")},n=e=>{const t=i.getShip(e.target.id),r=parseInt(t.getPositions()[0].match(/\d+/)[0]),n=t.getPositions()[0].match(/[a-j]/)[0],s=[...t.getPositions()].splice(1),a=e.target.className.match(/horizontal|vertical/)[0],l="abcdefghij".split("");let d=[];if(t.getPositions().length>1){for(let e=1;e<t.getPositions().length;e+=1)"vertical"===a?d.push(`${r}-${l[l.indexOf(n)+e]}`):"horizontal"===a&&d.push(`${r+e}-${n}`);t.overridePositions(d)}i.hasPlayerPositions(d)||(i.removePlayerPositions(s),i.addPlayerPositions(d),o(e))},s=(e,t,r)=>{e.classList.remove(t);let i="";t.includes("vertical")?i="horizontal":t.includes("horizontal")&&(i="vertical"),e.classList.add(`${i}${t.substring(r)}`)},o=e=>{e.target.classList.forEach(t=>{/^horizontal/.test(t)?s(e.target,t,10):/^vertical/.test(t)&&s(e.target,t,8)})};return{init:()=>{const e=document.querySelectorAll('*[class^="ship"]');for(const i of e)i.addEventListener("dragstart",t,!1),i.addEventListener("dragend",r,!1),i.addEventListener("click",n,!1)},getDragged:()=>e}})();const s=e=>{e.preventDefault()},o=e=>{e.preventDefault()},a=e=>{e.preventDefault()},l=e=>e.match(/battleship/)?4:e.match(/cruiser/)?3:e.match(/destroyer/)?2:e.match(/submarine/)?1:void 0,d=(e,t,r)=>{const i=parseInt(e.match(/\d+/)[0]),n=e.substring(5).match(/[a-j]/)[0],s=t.match(/horizontal|vertical/)[0],o="abcdefghij".split("");let a=[];if(r>1)for(let e=1;e<r;e+=1)"horizontal"===s?a.push(`${i}-${o[o.indexOf(n)+e]}`):"vertical"===s&&a.push(`${i+e}-${n}`);return a},c=e=>{const t=e.dataTransfer.getData("text"),r=document.getElementById(t),n=i.resetShipPositions(t);n&&i.removePlayerPositions(n),e.target.appendChild(r),((e,t,r)=>{const n=e.id.substring(5),s=l(r),o=[n,...d(e.id,t.className,s)],a=i.addShipPositions(r,o);a&&i.addPlayerPositions(a)})(e.target,r,t),r.className=(e=>{const t=e.split(" ");return t.splice(1,0,"dropped"),t.join(" ")})(r.className)},u=e=>{e.preventDefault(),(e=>{const t=n.getDragged(),r=document.getElementById(t),s=d(e.target.id,r.className,l(t)),o=[e.target.id.substring(5),...s];for(let e=0;e<o.length;e+=1)if(o[e].match(/undefined/))return!0;return i.hasPlayerPositions(o)})(e)||/^cell/.test(e.target.id)&&c(e)};var g=()=>{n.init(),(()=>{const e=document.querySelectorAll(".cell");for(const t of e)t.addEventListener("dragover",s,!1),t.addEventListener("dragenter",o,!1),t.addEventListener("dragleave",a,!1),t.addEventListener("drop",u,!1)})()};const f=(e,t,r)=>e>=0&&e<r-1&&0===t?"first-border":e===r-1&&0===t?"bottom-right-border":e===r-1&&t>0?"last-row-inner-border":"inner-border";var h=()=>{(()=>{const e=document.getElementById("board");e.innerHTML="";const t=["a","b","c","d","e","f","g","h","i","j"];for(let r=0;r<10;r+=1){let i=`<div id="cells-${r+1}" class="cells">`;for(let e=0;e<10;e+=1)i+=`<div id="cell-${r+1}-${t[e]}" class="cell ${f(r,e,10)}"></div>`;i+="</div>",e.innerHTML+=i}})()},p=(e,t,r)=>{let i=[],n=[];return{getID:()=>e,getType:()=>t,getSize:()=>r,getPositions:()=>i,addPosition:e=>{i.push(e)},overridePositions:e=>{const t=i[0];i=[t,...e]},resetPositions:()=>{const e=[...i];return i=[],e},hit:e=>{n.push(e)},isSunk:()=>i.length===n.length}};(()=>{const e=[{size:4,quantity:1,name:"battleship"},{size:3,quantity:2,name:"cruiser"},{size:2,quantity:3,name:"destroyer"},{size:1,quantity:4,name:"submarine"}],t=document.getElementById("ships");let r="";e.forEach(e=>{const t=e.quantity;for(let n=0;n<t;n+=1){const t=p(e.name+"-"+n,e.name,e.size);i.addPlayerShip(t),r+=`<div id="${e.name}-${n}" class="ship-${e.name}-${n} horizontal-${e.name}" draggable="true"></div>`}}),t.innerHTML=r})(),h(),g()}]);